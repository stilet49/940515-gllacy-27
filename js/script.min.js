var link=document.querySelector(".callback-form-button"),popup=document.querySelector(".modal-callback"),mask=document.querySelector(".modal-mask"),close=popup.querySelector(".modal-close"),form=popup.querySelector("form"),name_user=popup.querySelector("[name=callback-name]"),email=popup.querySelector("[name=callback-email]"),message=popup.querySelector("[name=callnack-message]"),storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("show-modal"),mask.classList.add("visible"),storageName&&storageEmail?(name_user.value=storageName,email.value=storageEmail,message.focus()):name_user.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("show-modal"),mask.classList.remove("visible"),popup.classList.remove("error-modal")}),form.addEventListener("submit",function(e){name_user.value&&email.value&&message.value?(localStorage.setItem("name",name_user.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("error-modal"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("error-modal"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("show-modal")&&(popup.classList.remove("show-modal"),popup.classList.remove("error-modal"),mask.classList.remove("visible"))});
